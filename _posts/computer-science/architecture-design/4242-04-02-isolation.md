---
title: "隔离"
date: 2022-05-29 08:00:00 +0800
tags: computer-science 计算机科学 architecture-design 架构设计
comment: false
show_author_profile: true
show_subscribe: false
---

### 逻辑隔离（logical isolation）

#### 动静隔离

动态数据和静态数据分开。缓存（加速）变换频次小的数据（静态数据）。

- CDN 加速

加速前端依赖资源或者图片等不经常变化的数据。

- 数据库冷热表

数据库执行更新操作的时候会刷新数据库缓存，冷热分离可以避免冷数据的缓存频繁被热数据的更新刷。

#### 读写隔离

读操作和写操作分开。读操作不会修改数据，所以可以对数据做缓存（加速）。

- 数据库读写分离
- CQRS 模式：查询操作（读操作）和命令操作

#### 快慢隔离

不耗时的操作（快）和耗时的操作（慢）分开。使用异步结构，防止耗时的操作堵住整个流程。

- 业务逻辑（快）和消息推送（慢）分开。
- 业务逻辑（快）和记录日志（慢）分开。

#### 核心非核心

核心资源和非核心资源分开。

- 核心服务独享服务器
- 核心用户独享线路

#### 热点非热点

热点数据和非热点数据分开。

热点数据意味着，即使使用了分布式缓存系统，请求也会集中命中到其中的一个节点上。

将热点数据从缓存系统提升为本地缓存，可以防止对热点数据把缓存系统对应的节点压垮。

### 物理隔离（physical isolation）

#### 线程隔离

不同的任务使用不同的线程（线程池）。

- 业务逻辑（主线程执行）、消息通知（多线程异步处理）、记录日志（多线程异步处理）

#### 进程隔离

不同的服务放到不同的进程中执行。

- 不同的服务单独部署（单机器、多机器）
- 不同的服务部署在不同的容器中（docker）
- 控制每个进程的资源（在 Linux 中，使用 cgroup）

#### 集群隔离

将一个逻辑集群拆成多个物理集群去部署（多集群）。

然后不同类别的流量，可以通过流量路由，访问不同的集群。

#### 机房隔离

将一个服务部署在不同的机房内（异地多活）。

然后不同类别的流量，可以通过流量路由，访问不同的机房。

### 参考

- 极客时间：Go 进阶训练营
