---
title: "计算机科学--数据库--MySQL--Index（索引）"
create_date: 2022-05-23 08:00:00 +0800
date: 2022-05-23 08:00:00 +0800
tags: computer-science database mysql
comment: false
show_author_profile: true
show_subscribe: false
---

### 索引

索引分为聚簇索引（主键索引）和非聚簇索引（二级索引）。

- 聚簇索引的叶子结点存放的是实际数据，也就是用户记录
- 二级索引的叶子结点存放的不是实际数据，而是主键值

主键索引只有一个，二级索引可以创建多个。

#### 回表

如果某个查询语句使用了二级索引，但是查询的数据是整行数据，这时在二级索引找到主键后，需要回到聚簇索引中获得用户记录。

#### 索引覆盖

如果某个查询语句使用了二级索引，而且查询的数据就是主键或者索引字段，这时在二级索引找到主键后，就不需要回到聚簇索引中获得用户记录了，因为二级索引中已经存储了主键的值和索引字段的值。

索引覆盖的条件一般索引和联合索引都适用。

### B+ 树

MySQL 的数据和索引都是保存到硬盘上的，所以索引结构在能尽可能少的硬盘 IO 的次数的前提下，还需要能支持高效的查询某条记录和高效的进行范围查找。

- 支持高效的查询某条记录的结构有：数组、平衡二叉树、红黑树、跳表、B 树、B+ 树等。
- 支持高效的进行范围查找的结构有：数组、链表、跳表、B 树、B+ 树等。

两个要求同时符合的有数组、跳表、B 树、B+ 树。

数组和跳表都有一个问题，它们都需要整个存在内存里才能实现比较好的效果，而数据库的应用场景不可能把整个索引结构存在内存里。

B 树的问题在于：1、插入和删除的时候可能需要移动结点，B+ 树可以不移动。2、范围查询的时候使用中序遍历访问的的结点数量比 B+ 树叶子结点的双向链表结构访问的结点数量多。