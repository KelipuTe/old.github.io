---
title: "计算机硬件历史"
create_date: 2021-11-09 08:00:00 +0800
date: 2022-05-06 08:00:00 +0800
tags: hardware
comment: false
show_author_profile: true
show_subscribe: false
---

### 继电器

机电计算机 "Harvard Mark I"（哈佛马克一号），由 IBM 于 1944 年完成建造。"Harvard Mark I" 的核心部件是继电器。

继电器是用电控制的机械开关。因为继电器内的机械臂有质量，所以无法快速开关，这导致计算速度受限。

1947 年 9 月，"Harvard Mark II"（哈佛马克二号）的操作员从故障的继电器中拔出 1 只死虫。Grace Hopper 曾说："从那时起，每当电脑出了问题，我们就说它出了 bug（虫子）"

### 真空管

1904 年，英国物理学家 John Ambrose Fleming（约翰·安布罗斯·弗莱明）发明thermionic valve（热电子管）。世界上第一个真空管。

1906 年，美国发明家 Lee de Forest（李·德富雷斯特）发明 triode vacuum tubes（三级真空管）。在弗莱明设计的热电子管的两个电极之间，加入了第三个控制电极。

真空管的功能和继电器一样，但是真空管内没有会动的组件，而且每秒可以开闭数千次。真空管标志着计算机从机电转向电子。

"Colossus MK I"（巨人一号）是第一个大规模使用真空管的计算机，由 Tommy Fliwers 设计，于 1943 年完工。

ENIAC（Electronic Numberical Integrator and Calculator、电子数值积分计算机、埃尼亚克），由 John Mauchly 和 J.Presper Eckert 设计，于 1946 年在宾夕法尼亚大学完成建造。它是世界上第一个通用的可编程的电子计算机。

### 晶体管

1947 年，贝尔实验室的科学家 John Bardeen、Walter Brattain、William Shockley 发明 transistor（晶体管）。

晶体管有 3 根线：1 根控制线、2 根电极线。当控制线通电时，电流就可以从一个电极流到另一个电极。晶体管可以不只是控制开关，还可以让不同大小的电流通过。

晶体管是 solid state component（固态原件）而且远小于继电器或者真空管。

晶体管的物理学相当复杂，涉及到量子力学。

生产 semiconductors（半导体）最常见的材料是 silicon（硅）。

### 二进制

Binary（二进制）表示 of two states（用两种状态）。用 1 和 0 表示 true 和 false 。

早期计算机有（ternay）三进制和（quinary）五进制的。三进制和五进制的问题在于，状态越多越难区分信号，二进制可以尽可能减少这类问题。

可以用 1 bit （比特）表示一个二进制位。1 个 byte（字节） = 8 bit；1 kb（kilobytes，千字节） = 2^10 byte；1 mb（megabytes，兆字节） = 2^10 kb；以此类推。

使用二进制另一个原因在于，二进制和 mathematics（数学）高度契合。Boolean Algebra（布尔代数）提供了 rules（法则）和 operations（运算）专门处理 true（真）和 false（假）。布尔代数的"布尔"来自英国数学家 George Boole（乔治·布尔）

布尔代数的三个基本操作：AND（与，符号：`&`）、OR（或，符号：`|`）、NOT（非，符号：`!`）。

- 整数：原码、反码、补码。
- 小数（浮点数）：IEEE 754 标准。
- American Standard Code for Information Interchange（ASCII，美国信息交换标准代码）发明于 1963 年。ASCII 码是 7 位的。
- Unicode（统一码）设计于 1992 年。常见的 Unicode 是 16 位的。

### 冯·诺依曼结构

数学家、物理学家 John Von Neumann（冯·诺依曼）提出了计算机制造的三个基本原则，即采用二进制逻辑、程序存储执行以及计算机由五个部分组成（运算器、控制器、存储器、输入设备、输出设备）。

运算器由 ALU（算术逻辑单元）、AC（累加寄存器）、DR（数据缓冲寄存器）、PSW（状态条件寄存器）组成。ALU 实现对数据的算数和逻辑运算。AC 是运算结果或者源操作数的存放区。DR 暂时存放内存的指令或数据。PSW 保存指令运行结果的条件码，如溢出标志。运算器执行所有的逻辑运算并进行逻辑测试，如与、或、非等。

控制器由 IR（指令寄存器）、PC（程序计数器）、AR（地址寄存器）、ID（指令译码器）组成。IR 暂存 CPU 执行指令。PC 存放指令执行地址。AR 保存当前 CPU 所访问的内存地址。ID 分析指令操作码。控制器控制整个 CPU 的工作。

存储器分为内部存储器（内存），如，内存条；和外部存储器（外存）如，硬盘。

这套理论被称为冯·诺依曼结构（Von Neumann Architecture）也称普林斯顿结构。第一台冯·诺依曼结构的存储程序计算机 Baby（宝宝）由曼彻斯特大学于 1948 年建造完成。

《2021-11-09-cpu》 这篇中构造的简单的 CPU 就是冯·诺依曼结构。运算器：算数逻辑单元、控制器：控制单元、存储器：数据寄存器、指令寄存器、指令地址寄存器、内存（存数据和指令）、输入设备：总线、输出设备：总线。

### 集成电路

1940 年代到 1960 年代中期之间的计算机都由独立部件组成，这些独立部件叫 discrete components（分立元件），然后不同组件再用线连在一起。如果想提升性能，就需要加更多的部件，这导致更多电线、更复杂。这个问题叫 tyranny of numbers（数字暴政）。

解决数字暴政的办法是引入一层新的抽象，封装复杂性。与其把多个独立的部件用电线连起来，不如把多个组件包在一起，变成一个新的独立组件。

1958 年，Jack Killby 演示了一个所有组件都集成在一起的电子部件，这就是 integrated circuit（IC、集成电路）。1959 年，Robert Noyce 的 Fairchild Semiconductor（仙童半导体）让集成电路变成现实。最早的集成电路是用金属锗做的，锗很稀少而且不稳定，后来变成硅，更容易获取，稳定性也更高。

早期集成电路就是把多个晶体管组合成独立的逻辑门组件。但最终还是要连接起来创造更大、更复杂的电路。之后工程师们发明了 printed circuit boards（PCB、印刷电路板），无需焊接或者用一大堆线，它通过蚀刻金属线的方式，把零件连接到一起。印刷电路板和集成电路一起使用，可以大幅减少独立组件和电线，但能做到相同的功能。而且更小、更便宜、更可靠。

### 光刻

即使组件再小，想要塞很多晶体管还是很困难。为了实现更复杂的设计，出现了全新的制作工艺：photolithography（光刻）。光刻就是用光把复杂的图案印到材料上，比如：半导体材料。

bipolar junction transistor（双极型晶体管）的制作流程：

- silicon wafer（硅晶圆）
- 覆盖一层薄薄的 oxide layer（氧化层）
- 覆盖 photoresist（光刻胶），光刻胶被光照后会变得可溶。
- 覆盖 photomask（光掩膜）
- powerful light（强光）照射
- 清洗被照射过的光刻胶，暴露出需要处理的氧化层。
- 清洗光掩膜
- 清洗需要处理的氧化层，暴露出需要处理的硅层。
- 清洗剩余光刻胶
- doping（掺杂）改变需要处理的硅层的电学性质。

- 覆盖氧化层
- 覆盖光刻胶
- 覆盖光掩膜（这次图案不同）
- 强光照射
- 清洗被照射过的光刻胶
- 清洗光掩膜
- 清洗需要处理的氧化层
- 清洗剩余光刻胶
- 掺杂

- 覆盖光刻胶
- 覆盖光掩膜（蚀刻小通道，用于放置连接不同晶体管的细小金属导线）
- 强光照射
- 清洗被照射过的光刻胶
- 清洗光掩膜、
- 清洗需要处理的氧化层
- 金属化（放一层薄薄的金属）

- 覆盖光刻胶
- 覆盖光掩膜（暴露不需要的金属）
- 强光照射
- 清洗被照射过的光刻胶，暴露出需要处理的金属层。
- 清洗光掩膜
- 清洗需要处理的金属层
- 清洗剩余光刻胶

这样双极型晶体管就做好了。

上文的例子只做了一个晶体管，但是现实中光刻法一次可以做上百万个细节。

光掩膜也不一定非要覆盖到光刻胶上，它可以是悬在空中的。通过光源和透镜，可以任意放大缩小投影出的图案的大小。

晶体管越小，要移动的电荷量就越少，能更快地切换状态，耗电更少。电路紧凑，意味着信号时延更低，时钟速度就可以更快。

1968 年，Robert Noyce（罗伯特·诺伊斯）和 Gordon Moore（戈登·摩尔）联手成立 Intel。1971 年，Intel 发布了第一个用集成电路作的处理器 Intel 4004 CPU，也叫 microprocessor（微型处理器）。

1970 年代开始，very-large-scale integration（VLSI、超大规模集成）软件用来自动生成芯片设计。用比如 logic synthesis（逻辑综合）技术，可以放一整个高级组件，软件会自动生成电路，做到尽可能高效。

#### 光刻的发展瓶颈

用光掩膜把图案弄到晶圆上，因为光的波长，精度已经达到极限。

当晶体管非常小，电极之间可能只距离几个原子，电子会跳过间隙，这叫 quantum tunneling（量子隧穿效应）。

### 参考

- Crash Course Computer Science（计算机科学速成课）
- [bilibili](https://www.bilibili.com/video/BV1EW411u7th)
- [CrashCourse 字幕组](https://github.com/1c7/crash-course-computer-science-chinese)
- [Youtube 原视频](https://www.youtube.com/playlist?list=PL8dPuuaLjXtNlUrzyH5r6jN9ulI)